<cc-timeline-item>
    <cc-timeline-item-badge [color]="color">
        <mat-icon>{{ icon ?? 'add' }}</mat-icon>
    </cc-timeline-item-badge>
    <cc-timeline-item-title>
        <cc-timeline-item-header
            [text]="title ?? 'added ' + (name | keyTitle)"
            [username]="modificationUnit.user_info.username"
            [createdAt]="modificationUnit.created_at"
            [removed]="!!modificationUnit.removed_at"
        ></cc-timeline-item-header>
        <div>
            <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_horiz</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="update()" [disabled]="isLoading$ | async">
                    Update
                </button>
                <button mat-menu-item (click)="remove()" [disabled]="isLoading$ | async">
                    Remove
                </button>
            </mat-menu>
        </div>
    </cc-timeline-item-title>
    <cc-timeline-item-content *ngIf="hasModificationContent">
        <cc-timeline-item-loading *ngIf="isLoading; else loaded"></cc-timeline-item-loading>
        <ng-template #loaded>
            <div #content><ng-content></ng-content></div>
            <mat-expansion-panel *ngIf="!content.innerHTML.trim().length">
                <mat-expansion-panel-header>
                    {{ name | keyTitle | titlecase }}
                </mat-expansion-panel-header>
                <cc-json-viewer [json]="modification" [patches]="patches"></cc-json-viewer>
            </mat-expansion-panel>
        </ng-template>
    </cc-timeline-item-content>
</cc-timeline-item>
