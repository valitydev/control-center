<cc-base-dialog title="Change claim status" [inProgress]="inProgress$ | async">
    <div gdColumns="1fr" gdGap="16px" [formGroup]="form">
        <mat-form-field>
            <mat-select
                placeholder="Status"
                formControlName="status"
                [disabled]="inProgress$ | async"
            >
                <mat-option *ngFor="let status of statuses" [value]="status">{{
                    status | keyTitle | titlecase
                }}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="form.value.status === 'denied'">
            <input
                aria-label="reason"
                matInput
                required
                formControlName="denyReason"
                placeholder="Reason"
                [disabled]="inProgress$ | async"
            />
        </mat-form-field>
        <mat-form-field *ngIf="form.value.status === 'revoked'">
            <mat-label>Reason</mat-label>
            <mat-select formControlName="revokeReason" [disabled]="inProgress$ | async" required>
                <!-- TODO: It's necessary to hardcode reasons (backend issue) -->
                <mat-option
                    *ngFor="
                        let reason of [
                            'Длительное ожидание подключения',
                            'Не устраивает комиссия',
                            'Большой пакет документов',
                            'Не подходит продукт',
                            'Нет сплитов'
                        ]
                    "
                    [value]="reason"
                >
                    {{ reason }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <cc-base-dialog-actions>
        <button
            mat-raised-button
            color="primary"
            [disabled]="form.invalid || (inProgress$ | async)"
            (click)="confirm()"
        >
            CONFIRM
        </button>
    </cc-base-dialog-actions>
</cc-base-dialog>
