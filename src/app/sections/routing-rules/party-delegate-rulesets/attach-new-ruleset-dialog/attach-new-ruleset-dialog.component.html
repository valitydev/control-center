<v-dialog title="Attach party delegate ruleset">
    <div [formGroup]="form" style="display: flex; flex-direction: column; gap: 24px">
        <cc-target-ruleset-form
            [type]="dialogData.type"
            (valid)="targetRulesetValid$.next($event)"
            (valueChanges)="targetRuleset$.next($event)"
        ></cc-target-ruleset-form>

        <ng-container formGroupName="ruleset">
            <mat-divider></mat-divider>
            <div class="mat-headline-4">Routing ruleset</div>
            <div style="display: flex; flex-direction: column; gap: 16px">
                <mat-form-field>
                    <input formControlName="name" matInput placeholder="Name" required />
                </mat-form-field>
                <mat-form-field>
                    <input
                        formControlName="description"
                        matInput
                        placeholder="Description (optional)"
                    />
                </mat-form-field>
            </div>
        </ng-container>
    </div>

    <v-dialog-actions>
        <button
            [disabled]="form.invalid || !(targetRulesetValid$ | async)"
            color="primary"
            mat-button
            (click)="attach()"
        >
            Attach
        </button>
    </v-dialog-actions>
</v-dialog>
