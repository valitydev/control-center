<cc-page-layout
    [progress]="isLoading$ | async"
    description="#{{ (payment$ | async).id }} of Invoice #{{ (payment$ | async).invoice_id }}"
    title="Payment"
>
    <ng-container *ngIf="payment$ | async as payment">
        <mat-card>
            <mat-card-content>
                <cc-payment-main-info
                    [payment]="payment"
                    [shop]="shop$ | async"
                ></cc-payment-main-info>
                <!--                <cc-json-viewer-->
                <!--                    [metadata]="metadata$ | async"-->
                <!--                    [value]="payment"-->
                <!--                    namespace="magista"-->
                <!--                    type="StatPayment"-->
                <!--                ></cc-json-viewer>-->
            </mat-card-content>
        </mat-card>

        <h2 class="mat-h1 mat-no-margin">Refunds</h2>
        <mat-card>
            <mat-card-content>
                <cc-payment-refunds
                    [invoiceID]="payment.invoice_id"
                    [partyID]="payment.owner_id"
                    [paymentID]="payment.id"
                ></cc-payment-refunds>
            </mat-card-content>
        </mat-card>

        <div fxLayout fxLayoutAlign="space-between">
            <h2 class="mat-h1 mat-no-margin">Chargebacks</h2>
            <v-actions>
                <button color="primary" mat-button (click)="createChargeback()">
                    Create chargeback
                </button>
            </v-actions>
        </div>
        <mat-card>
            <cc-chargebacks
                [chargebacks]="chargebacks$ | async"
                [invoiceId]="payment.invoice_id"
                [paymentId]="payment.id"
            ></cc-chargebacks>
        </mat-card>
    </ng-container>
</cc-page-layout>
