<div *ngIf="view" gdColumns="1fr" gdGap="16px">
    <div *ngIf="view.leaves.length" gdColumns="1fr 1fr 1fr" gdGap="16px">
        <div *ngFor="let item of view.leaves; let i = index" fxLayout="column" fxLayoutGap="8px">
            <div class="cc-details-item-title mat-caption">
                <cc-key
                    *ngIf="!(extensionResult$ | async)?.key; else extensionKey"
                    [keys]="item.keys"
                ></cc-key>
                <ng-template #extensionKey>{{ (extensionResult$ | async).key }}</ng-template>
            </div>
            <div class="mat-body-1 cc-details-item-content">
                <div *ngIf="item.isEmpty; else content" class="cc-details-item-content-empty">
                    <mat-icon inline>hide_source</mat-icon>
                </div>
                <ng-template #content>
                    {{ (extensionResult$ | async)?.value ?? item.xvalue }}
                </ng-template>
            </div>
        </div>
    </div>

    <ng-container *ngFor="let item of view.nodes; let i = index">
        <mat-divider *ngIf="i !== 0 || view.leaves.length"></mat-divider>
        <div [gdColumns]="item.isIndex ? 'auto 1fr' : '1fr'" gdGap="16px">
            <cc-key
                *ngIf="!(extensionResult$ | async)?.key; else extensionKey"
                [class]="className"
                [index]="item.isIndex ? item.keys[0].value + 1 : undefined"
                [keys]="item.keys"
            ></cc-key>
            <ng-template #extensionKey>{{ (extensionResult$ | async).key }}</ng-template>

            <ng-container *ngIf="(extensionResult$ | async)?.value; else defaultValue">{{
                (extensionResult$ | async).value
            }}</ng-container>
            <ng-template #defaultValue>
                <cc-json-viewer
                    [data]="item.data"
                    [extensions]="extensions"
                    [json]="item.value"
                    [level]="level + 1"
                ></cc-json-viewer>
            </ng-template>
        </div>
    </ng-container>
</div>
