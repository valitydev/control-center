<div gdColumns="1fr" gdGap="16px">
    <ng-container *ngIf="data.type === 'bool'; else input">
        <div gdColumns="1fr" gdGap="16px">
            <cc-field-label
                class="cc-body-1"
                [field]="data.field"
                [type]="data.type"
            ></cc-field-label>
            <div fxLayoutGap="4px" fxLayoutAlign=" center">
                <mat-radio-group fxFlex gdColumns="1fr 1fr" gdGap="8px" [formControl]="control">
                    <mat-radio-button [value]="false">False</mat-radio-button>
                    <mat-radio-button [value]="true">True</mat-radio-button>
                </mat-radio-group>
                <button
                    mat-icon-button
                    *ngIf="
                        !data.isRequired && control.value !== null && control.value !== undefined
                    "
                    (click)="clear($event)"
                >
                    <mat-icon>clear</mat-icon>
                </button>
                <button *ngIf="generate$ | async" mat-icon-button (click)="generate($event)">
                    <mat-icon>loop</mat-icon>
                </button>
            </div>
        </div>
    </ng-container>
    <ng-template #input>
        <div fxLayoutGap="4px">
            <mat-form-field fxFlex>
                <mat-label>
                    <cc-field-label
                        *ngIf="!(data.extensionResult$ | async)?.label; else extensionLabel"
                        [field]="data.field"
                        [type]="data.type"
                    ></cc-field-label>
                    <ng-template #extensionLabel>{{
                        (data.extensionResult$ | async).label
                    }}</ng-template>
                </mat-label>
                <input
                    matInput
                    [matAutocomplete]="auto"
                    #trigger="matAutocompleteTrigger"
                    [formControl]="control"
                    [required]="data.isRequired"
                    [type]="inputType"
                    [ngClass]="{ 'cc-code': (data.extensionResult$ | async)?.isIdentifier }"
                />
                <div matSuffix fxLayoutGap="4px">
                    <button
                        mat-icon-button
                        *ngIf="!data.isRequired && control.value"
                        (click)="clear($event)"
                    >
                        <mat-icon>clear</mat-icon>
                    </button>
                    <button
                        *ngIf="(extensionResult$ | async)?.options?.length"
                        mat-icon-button
                        (click)="
                            auto.isOpen ? trigger.closePanel() : trigger.openPanel();
                            $event.stopPropagation()
                        "
                    >
                        <mat-icon>{{ auto.isOpen ? 'expand_less' : 'expand_more' }}</mat-icon>
                    </button>
                </div>
                <mat-hint>{{ aliases }}</mat-hint>
                <mat-autocomplete #auto="matAutocomplete">
                    <ng-container *ngIf="data.extensionResult$ | async as extensionResult">
                        <mat-option
                            *ngFor="let option of filteredOptions$ | async"
                            [value]="option.value"
                        >
                            <div fxLayout="row" fxLayoutGap="8px" fxLayoutAlign=" center">
                                <div [ngClass]="{ 'cc-code': extensionResult.isIdentifier }">
                                    {{ option.value }}
                                </div>
                                <cc-label [label]="option.label" [color]="option.color"></cc-label>
                            </div>
                        </mat-option>
                    </ng-container>
                </mat-autocomplete>
            </mat-form-field>
            <button *ngIf="generate$ | async" mat-icon-button (click)="generate($event)">
                <mat-icon>loop</mat-icon>
            </button>
        </div>
    </ng-template>
    <ng-container *ngIf="selected$ | async as selected">
        <mat-expansion-panel *ngIf="selected.details">
            <mat-expansion-panel-header>
                <mat-panel-title fxLayout="row" fxLayoutGap="8px" fxLayoutAlign=" center">
                    <div>Details</div>
                    <cc-label [label]="selected.label" [color]="selected.color"></cc-label>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <cc-json-viewer [json]="selected.details"></cc-json-viewer>
        </mat-expansion-panel>
    </ng-container>
</div>
